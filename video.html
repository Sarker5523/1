<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Player</title>
    
    <!-- Video.js Styles & Script -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/video.js/8.5.0/video-js.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/video.js/8.5.0/video.min.js"></script>

    <style>
        body { font-family: Arial, sans-serif; background-color: #141414; color: white; text-align: center; padding: 20px; }
        .container { max-width: 800px; margin: auto; }
        .video-container { margin-bottom: 20px; }
        .suggestions { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin-top: 20px; }
        .suggestion-item { cursor: pointer; width: 150px; text-align: center; }
        .suggestion-item img { width: 100%; border-radius: 5px; }
        .suggestion-item h4 { font-size: 14px; color: #ff8c00; margin-top: 5px; }
        .switch-button { background-color: #ff8c00; border: none; color: white; padding: 10px 20px; cursor: pointer; margin-bottom: 20px; }
        .switch-button:hover { background-color: #e07b00; }
    </style>
</head>
<body>

    <div class="container">
        <h1 id="video-title">Loading...</h1>

        <!-- Video Player Container -->
        <div class="video-container">
            <button class="switch-button" onclick="switchPlayer()">Switch Player</button>

            <!-- Default Player -->
            <video id="defaultPlayer" class="video-js vjs-default-skin" controls width="800" height="450" crossorigin="anonymous">
                <source id="defaultSource" src="" type="application/x-mpegURL">
            </video>

            <!-- Alternative Player (Initially Hidden) -->
            <video id="altPlayer" controls width="800" height="450" style="display: none;">
                <source id="altSource" src="" type="video/mp4">
            </video>
        </div>

        <!-- Video Description -->
        <p id="video-description">Loading description...</p>

        <!-- Suggestions Section -->
        <h2>Related Videos</h2>
        <div id="suggestions" class="suggestions"></div>
    </div>

    <script>
        // Get video ID from URL
        const urlParams = new URLSearchParams(window.location.search);
        const videoId = urlParams.get('id');
        let isDefaultPlayer = true;

        // Fetch video data from JSON
        fetch('videos.json')
            .then(response => response.json())
            .then(videos => {
                const video = videos.find(v => v.id === videoId);
                if (!video) {
                    document.getElementById('video-title').innerText = "Video Not Found";
                    return;
                }

                // Update video title and description
                document.getElementById('video-title').innerText = video.name;
                document.getElementById('video-description').innerText = video.description;

                // Set video sources
                document.getElementById('defaultSource').src = video.url;
                document.getElementById('altSource').src = video.url;
                
                // Initialize Video.js player
                var player = videojs('defaultPlayer', { techOrder: ['html5'], autoplay: false, controls: true });
                player.src({ type: 'application/x-mpegURL', src: video.url });

                // Load suggestions
                const suggestionsContainer = document.getElementById('suggestions');
                video.suggestions.forEach(suggestionId => {
                    const suggestedVideo = videos.find(v => v.id === suggestionId);
                    if (suggestedVideo) {
                        const suggestionItem = document.createElement('div');
                        suggestionItem.classList.add('suggestion-item');
                        suggestionItem.innerHTML = `
                            <a href="video.html?id=${suggestedVideo.id}">
                                <img src="${suggestedVideo.thumbnail}" alt="${suggestedVideo.name}">
                                <h4>${suggestedVideo.name}</h4>
                            </a>
                        `;
                        suggestionsContainer.appendChild(suggestionItem);
                    }
                });
            })
            .catch(error => console.error('Error loading JSON:', error));

        // Function to switch between players
        function switchPlayer() {
            const defaultPlayer = document.getElementById('defaultPlayer');
            const altPlayer = document.getElementById('altPlayer');

            if (isDefaultPlayer) {
                defaultPlayer.style.display = 'none';
                altPlayer.style.display = 'block';
                altPlayer.play();
            } else {
                altPlayer.style.display = 'none';
                defaultPlayer.style.display = 'block';
                videojs('defaultPlayer').play();
            }
            isDefaultPlayer = !isDefaultPlayer;
        }
    </script>

</body>
</html>